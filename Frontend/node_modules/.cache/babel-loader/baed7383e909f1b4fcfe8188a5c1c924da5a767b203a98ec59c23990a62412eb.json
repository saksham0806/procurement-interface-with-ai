{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import RFPForm from\"./RFPForm\";import RFPDetails from'./RFPDetails';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RFPList=_ref=>{let{user}=_ref;const[rfps,setRfps]=useState([]);const[showForm,setShowForm]=useState(false);const[selectedRfp,setSelectedRfp]=useState(null);useEffect(()=>{fetchRFPs();},[]);const fetchRFPs=async()=>{try{const response=await axios.get('/api/rfps');setRfps(response.data);}catch(error){console.error('Error fetching RFPs:',error);}};const publishRFP=async id=>{try{await axios.put(\"/api/rfps/\".concat(id,\"/publish\"));fetchRFPs();}catch(error){console.error('Error publishing RFP:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"rfp-list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"RFPs\"}),user.role==='buyer'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(true),className:\"btn btn-primary\",children:\"Create RFP\"})]}),showForm&&/*#__PURE__*/_jsx(RFPForm,{onClose:()=>setShowForm(false),onSubmit:()=>{setShowForm(false);fetchRFPs();}}),selectedRfp&&/*#__PURE__*/_jsx(RFPDetails,{rfpId:selectedRfp,onClose:()=>setSelectedRfp(null),userRole:user.role}),/*#__PURE__*/_jsx(\"div\",{className:\"rfp-grid\",children:rfps.map(rfp=>/*#__PURE__*/_jsxs(\"div\",{className:\"rfp-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:rfp.title}),/*#__PURE__*/_jsx(\"p\",{className:\"rfp-category\",children:rfp.category}),/*#__PURE__*/_jsxs(\"p\",{className:\"rfp-budget\",children:[\"Budget: $\",rfp.budget.toLocaleString()]}),/*#__PURE__*/_jsxs(\"p\",{className:\"rfp-deadline\",children:[\"Deadline: \",new Date(rfp.deadline).toLocaleDateString()]}),/*#__PURE__*/_jsx(\"p\",{className:\"rfp-status\",children:rfp.status}),/*#__PURE__*/_jsxs(\"div\",{className:\"rfp-actions\",children:[user.role==='buyer'&&rfp.status==='draft'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>publishRFP(rfp._id),className:\"btn btn-success\",children:\"Publish\"}),user.role==='vendor'&&rfp.status==='published'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedRfp(rfp._id),className:\"btn btn-primary\",children:\"Submit Quote\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedRfp(rfp._id),className:\"btn btn-secondary\",children:\"View Details\"})]})]},rfp._id))})]});};export default RFPList;","map":{"version":3,"names":["React","useState","useEffect","axios","RFPForm","RFPDetails","jsx","_jsx","jsxs","_jsxs","RFPList","_ref","user","rfps","setRfps","showForm","setShowForm","selectedRfp","setSelectedRfp","fetchRFPs","response","get","data","error","console","publishRFP","id","put","concat","className","children","role","onClick","onClose","onSubmit","rfpId","userRole","map","rfp","title","category","budget","toLocaleString","Date","deadline","toLocaleDateString","status","_id"],"sources":["/run/media/Saksham/Saksham/Code/Projects/ai-supplies/Frontend/src/components/RFPList.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nimport RFPForm from \"./RFPForm\"\nimport RFPDetails from './RFPDetails';\n\nconst RFPList = ({ user }) => {\n  const [rfps, setRfps] = useState([]);\n  const [showForm, setShowForm] = useState(false);\n  const [selectedRfp, setSelectedRfp] = useState(null);\n\n  useEffect(() => {\n    fetchRFPs();\n  }, []);\n\n  const fetchRFPs = async () => {\n    try {\n      const response = await axios.get('/api/rfps');\n      setRfps(response.data);\n    } catch (error) {\n      console.error('Error fetching RFPs:', error);\n    }\n  };\n\n  const publishRFP = async (id) => {\n    try {\n      await axios.put(`/api/rfps/${id}/publish`);\n      fetchRFPs();\n    } catch (error) {\n      console.error('Error publishing RFP:', error);\n    }\n  };\n\n  return (\n    <div className=\"rfp-list\">\n      <div className=\"section-header\">\n        <h2>RFPs</h2>\n        {user.role === 'buyer' && (\n          <button\n            onClick={() => setShowForm(true)}\n            className=\"btn btn-primary\"\n          >\n            Create RFP\n          </button>\n        )}\n      </div>\n      \n      {showForm && (\n        <RFPForm\n          onClose={() => setShowForm(false)}\n          onSubmit={() => {\n            setShowForm(false);\n            fetchRFPs();\n          }}\n        />\n      )}\n\n      {selectedRfp && (\n        <RFPDetails\n          rfpId={selectedRfp}\n          onClose={() => setSelectedRfp(null)}\n          userRole={user.role}\n        />\n      )}\n\n      <div className=\"rfp-grid\">\n        {rfps.map((rfp) => (\n          <div key={rfp._id} className=\"rfp-card\">\n            <h3>{rfp.title}</h3>\n            <p className=\"rfp-category\">{rfp.category}</p>\n            <p className=\"rfp-budget\">Budget: ${rfp.budget.toLocaleString()}</p>\n            <p className=\"rfp-deadline\">Deadline: {new Date(rfp.deadline).toLocaleDateString()}</p>\n            <p className=\"rfp-status\">{rfp.status}</p>\n            \n            <div className=\"rfp-actions\">\n              {user.role === 'buyer' && rfp.status === 'draft' && (\n                <button\n                  onClick={() => publishRFP(rfp._id)}\n                  className=\"btn btn-success\"\n                >\n                  Publish\n                </button>\n              )}\n              {user.role === 'vendor' && rfp.status === 'published' && (\n                <button \n                  onClick={() => setSelectedRfp(rfp._id)}\n                  className=\"btn btn-primary\"\n                >\n                  Submit Quote\n                </button>\n              )}\n              <button \n                onClick={() => setSelectedRfp(rfp._id)} \n                className=\"btn btn-secondary\"\n              >\n                View Details\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default RFPList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}