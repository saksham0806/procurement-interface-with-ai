{"ast":null,"code":"import _objectSpread from\"/run/media/Saksham/Saksham/Code/Projects/ai-supplies/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const QuoteForm=_ref=>{let{rfp,onClose,onSubmit}=_ref;const[formData,setFormData]=useState({totalPrice:'',deliveryTime:'',terms:'',items:[{description:'',quantity:1,unitPrice:'',totalPrice:''}]});const addItem=()=>{setFormData(_objectSpread(_objectSpread({},formData),{},{items:[...formData.items,{description:'',quantity:1,unitPrice:'',totalPrice:''}]}));};const updateItem=(index,field,value)=>{const newItems=[...formData.items];newItems[index][field]=value;// Auto-calculate total price for item\nif(field==='quantity'||field==='unitPrice'){const quantity=parseFloat(newItems[index].quantity)||0;const unitPrice=parseFloat(newItems[index].unitPrice)||0;newItems[index].totalPrice=(quantity*unitPrice).toFixed(2);}setFormData(_objectSpread(_objectSpread({},formData),{},{items:newItems}));// Calculate total price\nconst total=newItems.reduce((sum,item)=>sum+(parseFloat(item.totalPrice)||0),0);setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{items:newItems,totalPrice:total.toFixed(2)}));};const removeItem=index=>{const newItems=formData.items.filter((_,i)=>i!==index);setFormData(_objectSpread(_objectSpread({},formData),{},{items:newItems}));// Recalculate total\nconst total=newItems.reduce((sum,item)=>sum+(parseFloat(item.totalPrice)||0),0);setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{items:newItems,totalPrice:total.toFixed(2)}));};const handleSubmit=async e=>{e.preventDefault();try{const formDataObj=new FormData();formDataObj.append('rfpId',rfp._id);formDataObj.append('totalPrice',formData.totalPrice);formDataObj.append('deliveryTime',formData.deliveryTime);formDataObj.append('terms',formData.terms);formDataObj.append('items',JSON.stringify(formData.items));await axios.post('/api/quotes',formDataObj,{headers:{'Content-Type':'multipart/form-data'}});onSubmit();}catch(error){console.error('Error submitting quote:',error);alert('Error submitting quote. Please try again.');}};return/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Submit Quote for: \",rfp.title]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"items-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Quote Items\"}),formData.items.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"item-row\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Item Description\",value:item.description,onChange:e=>updateItem(index,'description',e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Quantity\",value:item.quantity,onChange:e=>updateItem(index,'quantity',e.target.value),required:true,min:\"1\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Unit Price\",value:item.unitPrice,onChange:e=>updateItem(index,'unitPrice',e.target.value),required:true,step:\"0.01\",min:\"0\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Total Price\",value:item.totalPrice,readOnly:true,className:\"readonly-input\"}),formData.items.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeItem(index),className:\"btn btn-danger\",children:\"Remove\"})]},index)),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addItem,className:\"btn btn-secondary\",children:\"Add Item\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Delivery Time (days)\",value:formData.deliveryTime,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{deliveryTime:e.target.value})),required:true,min:\"1\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Terms and Conditions\",value:formData.terms,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{terms:e.target.value})),rows:4}),/*#__PURE__*/_jsx(\"div\",{className:\"total-section\",children:/*#__PURE__*/_jsxs(\"h4\",{children:[\"Total Quote Amount: $\",formData.totalPrice||'0.00']})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Submit Quote\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"btn btn-secondary\",children:\"Cancel\"})]})]})]})});};export default QuoteForm;","map":{"version":3,"names":["React","useState","useEffect","axios","jsxs","_jsxs","jsx","_jsx","QuoteForm","_ref","rfp","onClose","onSubmit","formData","setFormData","totalPrice","deliveryTime","terms","items","description","quantity","unitPrice","addItem","_objectSpread","updateItem","index","field","value","newItems","parseFloat","toFixed","total","reduce","sum","item","prev","removeItem","filter","_","i","handleSubmit","e","preventDefault","formDataObj","FormData","append","_id","JSON","stringify","post","headers","error","console","alert","className","children","title","map","type","placeholder","onChange","target","required","min","step","readOnly","length","onClick","rows"],"sources":["/run/media/Saksham/Saksham/Code/Projects/ai-supplies/Frontend/src/components/QuoteForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst QuoteForm = ({ rfp, onClose, onSubmit }) => {\n  const [formData, setFormData] = useState({\n    totalPrice: '',\n    deliveryTime: '',\n    terms: '',\n    items: [{\n      description: '',\n      quantity: 1,\n      unitPrice: '',\n      totalPrice: ''\n    }]\n  });\n\n  const addItem = () => {\n    setFormData({\n      ...formData,\n      items: [...formData.items, {\n        description: '',\n        quantity: 1,\n        unitPrice: '',\n        totalPrice: ''\n      }]\n    });\n  };\n\n  const updateItem = (index, field, value) => {\n    const newItems = [...formData.items];\n    newItems[index][field] = value;\n    \n    // Auto-calculate total price for item\n    if (field === 'quantity' || field === 'unitPrice') {\n      const quantity = parseFloat(newItems[index].quantity) || 0;\n      const unitPrice = parseFloat(newItems[index].unitPrice) || 0;\n      newItems[index].totalPrice = (quantity * unitPrice).toFixed(2);\n    }\n    \n    setFormData({ ...formData, items: newItems });\n    \n    // Calculate total price\n    const total = newItems.reduce((sum, item) => sum + (parseFloat(item.totalPrice) || 0), 0);\n    setFormData(prev => ({ ...prev, items: newItems, totalPrice: total.toFixed(2) }));\n  };\n\n  const removeItem = (index) => {\n    const newItems = formData.items.filter((_, i) => i !== index);\n    setFormData({ ...formData, items: newItems });\n    \n    // Recalculate total\n    const total = newItems.reduce((sum, item) => sum + (parseFloat(item.totalPrice) || 0), 0);\n    setFormData(prev => ({ ...prev, items: newItems, totalPrice: total.toFixed(2) }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const formDataObj = new FormData();\n      formDataObj.append('rfpId', rfp._id);\n      formDataObj.append('totalPrice', formData.totalPrice);\n      formDataObj.append('deliveryTime', formData.deliveryTime);\n      formDataObj.append('terms', formData.terms);\n      formDataObj.append('items', JSON.stringify(formData.items));\n\n      await axios.post('/api/quotes', formDataObj, {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      });\n      \n      onSubmit();\n    } catch (error) {\n      console.error('Error submitting quote:', error);\n      alert('Error submitting quote. Please try again.');\n    }\n  };\n\n  return (\n    <div className=\"modal\">\n      <div className=\"modal-content\">\n        <h3>Submit Quote for: {rfp.title}</h3>\n        <form onSubmit={handleSubmit}>\n          <div className=\"items-section\">\n            <h4>Quote Items</h4>\n            {formData.items.map((item, index) => (\n              <div key={index} className=\"item-row\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Item Description\"\n                  value={item.description}\n                  onChange={(e) => updateItem(index, 'description', e.target.value)}\n                  required\n                />\n                <input\n                  type=\"number\"\n                  placeholder=\"Quantity\"\n                  value={item.quantity}\n                  onChange={(e) => updateItem(index, 'quantity', e.target.value)}\n                  required\n                  min=\"1\"\n                />\n                <input\n                  type=\"number\"\n                  placeholder=\"Unit Price\"\n                  value={item.unitPrice}\n                  onChange={(e) => updateItem(index, 'unitPrice', e.target.value)}\n                  required\n                  step=\"0.01\"\n                  min=\"0\"\n                />\n                <input\n                  type=\"text\"\n                  placeholder=\"Total Price\"\n                  value={item.totalPrice}\n                  readOnly\n                  className=\"readonly-input\"\n                />\n                {formData.items.length > 1 && (\n                  <button\n                    type=\"button\"\n                    onClick={() => removeItem(index)}\n                    className=\"btn btn-danger\"\n                  >\n                    Remove\n                  </button>\n                )}\n              </div>\n            ))}\n            <button\n              type=\"button\"\n              onClick={addItem}\n              className=\"btn btn-secondary\"\n            >\n              Add Item\n            </button>\n          </div>\n\n          <input\n            type=\"number\"\n            placeholder=\"Delivery Time (days)\"\n            value={formData.deliveryTime}\n            onChange={(e) => setFormData({ ...formData, deliveryTime: e.target.value })}\n            required\n            min=\"1\"\n          />\n\n          <textarea\n            placeholder=\"Terms and Conditions\"\n            value={formData.terms}\n            onChange={(e) => setFormData({ ...formData, terms: e.target.value })}\n            rows={4}\n          />\n\n          <div className=\"total-section\">\n            <h4>Total Quote Amount: ${formData.totalPrice || '0.00'}</h4>\n          </div>\n\n          <div className=\"form-actions\">\n            <button type=\"submit\" className=\"btn btn-primary\">\n              Submit Quote\n            </button>\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"btn btn-secondary\"\n            >\n              Cancel\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default QuoteForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}